# 開発計画書 (plan.md)

## 1. 開発ロードマップ概要

### Phase 1: Browser Extension MVP (Minimum Viable Product: 実用最小限の製品)
**目標**: ブラウザ拡張機能としての基本機能実装とAIチャット連携の実現。
**期間**: (例: 3週間)
**主要機能**:
- コアロジックのWASMビルド対応（プラットフォーム非依存設計）。
- ブラウザのサイドパネルでのUI表示（egui/WASM）。
- WebカメラAPIを用いた顔認識・ジェスチャー判定。
- **自動送信連携**: 判定結果に基づき、アクティブタブへの「YES/NO」注入と自動送信。
- プライバシーマスク（顔以外を塗りつぶす簡易機能）。

### Phase 2: Web Store Alpha Release & Voice Overlay (早期公開と機能拡張)
**目標**: 音声機能の追加と、Chrome Web Store でのアルファ版公開。
**期間**: (例: 2週間)
**主要機能**:
- **音声入力**: アクティブな入力欄への音声テキスト入力 (Web Speech API)。
- **音声コマンド**: 「送信」「クリア」等の音声操作（多言語・カスタム対応）。
- **ストア公開**: アイコン・素材作成、審査提出、フィードバック収集。

### Phase 3: Desktop App MVP & Synergy (デスクトップ版展開)
**目標**: OS全体への入力を可能にするデスクトップ版の実装と、音声機能の水平展開。
**期間**: (例: 4週間)
**主要機能**:
- Rust + OpenCV + Enigo によるNativeデスクトップアプリ化。
- OS全体へのキーボード送信 (YES=「YES」+Enter, NO=「NO」+Enter)。
- **Window Guard**: シングルターゲット方式による誤爆防止。
- **デスクトップ音声連携**: 認識テキストを直接キーストロークとして送信。

### Phase 4: AI Native Ecosystem & Advanced Features (MCP連携と品質強化)
**目標**: MCPによるAIネイティブ連携と、UXの極大化。
**期間**: (例: 3週間)
**主要機能**:
- **MCP対応**: AIエージェント（Claude, Cursor等）と直接通信するサーバー機能の実装。
- **安全性強化**: 一時停止ホットキー、予告インジケータの実装。
- **プライバシー高度化**: AIによる背景除去。
- **将来的な拡張性**: 表情認識などの将来拡張。

## 2. タスクリスト

### 2.1. Phase 1: Extension MVP
- [ ] Rustプロジェクトの作成・WASM環境構築
- [ ] ソースコード構成の検討・設計
- [ ] 顔検出・ジェスチャー判定のコアロジック実装
- [ ] eguiによるサイドパネルUIの構築
- [ ] ブラウザタブ介入（文字注入・ボタンクリック）の実装

### 2.2. Phase 2: Alpha & Voice
- [ ] Web Speech API連携の実装
- [ ] 多言語対応とカスタムエイリアス設定UI
- [ ] ストア公開用アセットの作成と審査申請

### 2.3. Phase 3: Desktop App
- [ ] Native版ビルド構成の作成
- [ ] Enigoによる物理入力連携
- [ ] ウィンドウターゲット選択UIの実装

## 3. リスク管理

| リスク | 影響度 | 対策 |
| :--- | :--- | :--- |
| **拡張機能の審査リジェクト** | 高 | 権限使用理由の精査。必要最小限の `permissions` から開始する。 |
| **自動送信の誤動作** | 中 | 予告インジケータの実装順位を調整し、キャンセル手段を早期に確保。 |
| **WASMでのOpenCV動作** | 高 | OpenCV.js または Rust製の軽量画像処理ライブラリへの代替を検討。 |
