# ユーザー体験フロー (ux_flows.md)

## 1. 初回起動フロー
1.  **起動**: ユーザーがアプリケーションを起動。
2.  **権限確認**: カメラへのアクセス権権がない場合、OSのダイアログを表示。
3.  **デバイス検出**: 利用可能なカメラを自動検出し、デフォルトカメラでプレビューを開始。
4.  **キャリブレーション (Optional)**:
    - 「正面を見てください」→「大きく頷いてください」→「首を振ってください」といったガイドを表示し、ユーザーごとの可動域を測定・設定するウィザード。
5.  **待機状態**: メイン画面が表示され、常駐開始。

## 2. 通常利用フロー (コーディング中：デスクトップ版)
1.  **作業中**: ユーザーはエディタで作業。アプリはデスクトップの隅に表示。
2.  **AIからの問いかけ**: AIエージェントが「このコードで修正しますか？」と尋ねる。
3.  **ジェスチャー入力**: ユーザーが画面に向かって頷く (YES)。
4.  **予告フェーズ**:
    - 画面に小さな緑色のインジケータ（プログレスバー等）が表示され、0.5秒のカウントダウンが始まる。
5.  **入力実行**:
    - 0.5秒経過後、OSレベルで 「YES」 + `Enter` が送信される。
6.  **AIの実行**: AIエージェントが処理を続行する。

## 3. 通常利用フロー (AIチャット：WEB拡張機能版)
1.  **チャット中**: ユーザーがブラウザでChatGPTを使用。サイドパネルに `kaoiro` が表示されている。
2.  **AIの確認**: AIが「この方針で進めますか？」と回答。
3.  **ジェスチャー入力**: ユーザーが頷く (YES)。
4.  **自動実行**: 
    - ブラウザの入力欄に自動的に「YES」という文字が入る。
    - その直後、ブラウザの「送信」ボタンが自動的にクリックされる。
5.  **シームレスな体験**: ユーザーは一度もキーボードに触れずに、対話を継続できる。

## 4. 入力キャンセルフロー
1.  **誤検知・心変わり**: 何気なく頷いてしまった、あるいは入力したくないと思った。
2.  **予告検知**: 画面に「予告インジケータ」が表示されたのを確認。
3.  **回避アクション**: ユーザーが即座に顔を横に向ける、あるいは手で顔を覆う。
4.  **キャンセル**: アプリがジェスチャーの中断を検知し、キー送信を中止する。画面に「Canceled」と表示される。

## 5. 一時停止フロー
1.  **離席・会議開始**: PCの前を離れる、またはWeb会議が始まる。
2.  **ホットキー実行**: ユーザーが設定したホットキー（例: `Ctrl+Shift+P`）を押す。
3.  **停止状態**: アプリのアイコンがグレーアウトし、カメラ解析がサスペンドされる。
4.  **再開**: 再びホットキーを押すことで、解析を再開する。

## 6. ターゲット設定フロー (シングルターゲット方式)
1.  **ターゲット設定**: 「今はターミナルだけで使いたい」と考える。
2.  **ウィンドウ選択**: 設定パネルの「Target Window」プルダウンを開く。
3.  **アプリ指定**: 一覧から「Terminal」を選択する。
4.  **動作確認**: ターミナルがアクティブな時だけ反応し、ブラウザ等に切り替えると無視されることを確認。

## 7. 設定変更フロー
1.  **感度調整**: アプリの UI でスライダーを操作。
2.  **確認**: その場で何度か頷き、意図した通りに反応するか確認。
